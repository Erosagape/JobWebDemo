<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Content/bootstrap.min.css">
    <link rel="stylesheet" href="Content/jquery.datatables.min.css">
    <script src="Scripts/jquery-3.3.1.min.js"></script>
    <script src="Scripts/DataTables/jquery.dataTables.min.js"></script>
    <script src="Scripts/bootstrap.js"></script>
    <script src="Scripts/Func/Util.js"></script>
    <title>Template</title>
</head>
<body>
    <div class="panel-primary">
        <div class="panel-heading">
            <h4 class="panel-title">
                Container Calculator
            </h4>
        </div>
        <div class="panel-body">
            <div id="dvContCalc">
                <input type="text" id="txtTotalCon" value="1x20F,2x30F" />
                <input type="button" id="btnSplit" value="Split" onclick="SplitData()" />
                <input type="button" id="btnAdd" value="Add" onclick="AddService()" />
                <div id="dvSplit"></div>
                <input type="button" id="btnSubmit" value="Apply" onclick="SumService()" />
            </div>
        </div>
        <div class="panel-footer">
            <p>&copy; Tawan Technology Co.,ltd</p>
        </div>
    </div>
    <script type="text/javascript">
        function SplitData() {
            var dv = document.getElementById("dvSplit")
            dv.innerHTML = '';
            var str = document.getElementById("txtTotalCon");

            var arr = str.value.split(",");
            for (var i = 0; i < arr.length; i++) {
                AddNewService(arr[i]);              
            }
        }
        function AddService() {
            AddNewService("");
        }
        function AddNewService(val) {
            if (val.indexOf("x") < 0) val = "1x" + val;
            var dv = document.getElementById("dvSplit");
            var text = document.createElement("input");
            text.setAttribute("type", "text");
            text.setAttribute("name", "txtQtyCon");
            text.value = val.split("x")[0];
            dv.appendChild(text);

            var text2 = document.createElement("input");
            text2.setAttribute("type", "text");
            text2.setAttribute("name", "txtUnitCon");
            text2.value = val.split("x")[1];
            dv.appendChild(text2);

            var br = document.createElement("br");
            dv.appendChild(br);
        }
        function SumService() {
            var c = document.getElementsByName("txtQtyCon");
            var u = document.getElementsByName("txtUnitCon");
            var str = '';
            for (var i = 0; i < c.length; i++) {
                if (u[i].value == '') continue;
                if (str.length > 0) str += ',';
                var q = c[i].value;
                if (q == '') q = '1';
                str += q + 'x' + u[i].value;
            }
            var o = document.getElementById("txtTotalCon");
            o.value = str;
        }
    </script>
</body>
</html>